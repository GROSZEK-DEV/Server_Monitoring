<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<StackPane xmlns:fx="http://javafx.com/fxml"
           fx:id="rootPane"
           fx:controller="Main.Java.ui.DashboardController"
           prefWidth="1100.0" prefHeight="650.0" stylesheets="@style.css">
    <children>
        <!-- Main dashboard content -->
        <BorderPane>
            <!-- Header -->
            <top>
                <VBox>
                    <children>
                        <HBox alignment="CENTER_LEFT" styleClass="header-bar" BorderPane.alignment="CENTER">
                            <children>
                                <Label text="Minecraft Server Dashboard" styleClass="header-title" />
                            </children>
                            <padding>
                                <Insets top="16" right="24" bottom="8" left="24" />
                            </padding>
                        </HBox>
                        <!-- Server folder chooser row -->
                        <HBox spacing="8" alignment="CENTER_LEFT" styleClass="header-sub">
                            <padding>
                                <Insets top="4" right="24" bottom="8" left="24" />
                            </padding>
                            <children>
                                <Label text="Server folder:" styleClass="section-title" />
                                <TextField fx:id="serverPathField" promptText="Choose your Minecraft server folder" prefWidth="480" editable="false" />
                                <Button text="Browse..." onAction="#onBrowseServer" />
                            </children>
                        </HBox>
                    </children>
                </VBox>
            </top>

            <!-- Left: RAM usage + settings -->
            <left>
                <VBox spacing="16" BorderPane.alignment="CENTER_LEFT" styleClass="sidebar-left">
                    <padding>
                        <Insets top="16" right="16" bottom="16" left="16" />
                    </padding>
                    <children>
                        <Label text="RAM Usage" styleClass="section-title" />
                        <VBox spacing="6" styleClass="ram-box">
                            <children>
                                <HBox spacing="8" alignment="CENTER_LEFT">
                                    <children>
                                        <Label text="Used:" styleClass="ram-label" />
                                        <Label fx:id="ramUsedLabel" text="0 MB" styleClass="ram-value" />
                                        <Label text="/" styleClass="ram-label" />
                                        <Label fx:id="ramTotalLabel" text="0 MB" styleClass="ram-value" />
                                    </children>
                                </HBox>
                                <ProgressBar fx:id="ramUsageBar" prefWidth="200" progress="0.0" />
                            </children>
                        </VBox>

                        <Label text="RAM Settings" styleClass="section-title" />
                        <VBox spacing="8" styleClass="ram-settings-box">
                            <children>
                                <HBox spacing="6" alignment="CENTER_LEFT">
                                    <children>
                                        <Label text="Min (Xms):" styleClass="ram-label" />
                                        <TextField fx:id="minRamField" promptText="e.g. 1G" prefWidth="90" />
                                    </children>
                                </HBox>
                                <HBox spacing="6" alignment="CENTER_LEFT">
                                    <children>
                                        <Label text="Max (Xmx):" styleClass="ram-label" />
                                        <TextField fx:id="maxRamField" promptText="e.g. 4G" prefWidth="90" />
                                    </children>
                                </HBox>
                                <Button text="Apply RAM Settings" onAction="#onApplyRamSettings" />
                            </children>
                        </VBox>
                    </children>
                </VBox>
            </left>

            <!-- Center: Player list -->
            <center>
                <VBox spacing="8" BorderPane.alignment="CENTER" styleClass="center-panel">
                    <padding>
                        <Insets top="16" right="16" bottom="16" left="0" />
                    </padding>
                    <children>
                        <TableView fx:id="playerTable" prefHeight="400" styleClass="player-table">
                            <columnResizePolicy>
                                <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                            </columnResizePolicy>
                            <columns>
                                <TableColumn fx:id="playerNameColumn" text="Name" />
                                <TableColumn fx:id="playerKickColumn" text="Kick" />
                                <TableColumn fx:id="playerBanColumn" text="Ban" />
                                <TableColumn fx:id="playerOpColumn" text="Operator" />
                            </columns>
                        </TableView>
                    </children>
                </VBox>
            </center>

            <!-- Right: smaller console + input as single unit -->
            <right>
                <VBox spacing="8" BorderPane.alignment="CENTER" styleClass="console-panel-right">
                    <padding>
                        <Insets top="16" right="16" bottom="16" left="0" />
                    </padding>
                    <children>
                        <Label text="Console" styleClass="section-title" />
                        <VBox spacing="0" styleClass="console-unit">
                            <children>
                                <TextArea fx:id="consoleOutput"
                                          editable="false"
                                          wrapText="true"
                                          prefRowCount="18"
                                          prefWidth="360"
                                          styleClass="console-area" />
                                <HBox spacing="0" styleClass="console-input-row">
                                    <children>
                                        <Label text=">" styleClass="console-prompt" />
                                        <TextField fx:id="commandField" promptText="Type command and press Enter or Send" HBox.hgrow="ALWAYS" />
                                        <Button text="Send" onAction="#onSendCommand" styleClass="console-send-button" />
                                    </children>
                                </HBox>
                            </children>
                        </VBox>
                    </children>
                </VBox>
            </right>

            <!-- Bottom: main controls centered -->
            <bottom>
                <HBox alignment="CENTER" spacing="12" styleClass="footer-bar">
                    <padding>
                        <Insets top="10" right="16" bottom="10" left="16" />
                    </padding>
                    <children>
                        <Button text="Start" fx:id="startBtn" styleClass="primary-button" onAction="#onStartServer" />
                        <Button text="Stop" fx:id="stopBtn" styleClass="secondary-button" onAction="#onStopServer" />
                        <Button text="Restart" fx:id="restartBtn" styleClass="secondary-button" onAction="#onRestartServer" />
                    </children>
                </HBox>
            </bottom>

        </BorderPane>

        <!-- Splash overlay shown at app startup, faded out to reveal dashboard -->
        <StackPane fx:id="splashOverlay" styleClass="splash-overlay">
            <children>
                <VBox spacing="8" alignment="CENTER">
                    <Label text="Minecraft Server Dashboard" styleClass="splash-title" />
                    <Label text="Loading UI..." styleClass="splash-subtitle" />
                </VBox>
            </children>
        </StackPane>
    </children>
</StackPane>
